/* 全体の文字と配置 */
body {
  height: 100dvh;
  width: 100vw; /* 画面全体の幅に固定 */
  font-family: sans-serif;
  text-align: center;
  margin: 0;
  padding: 10px;
  box-sizing: border-box; /* paddingを含めて100vhに収める */
  background-color: #f9c5d5;
}

#homeScreen {
  padding-bottom: 7vh; /* ← ボタンの余白をホーム画面の一部にする */
}

/* タイトル */
.game-title {
  font-family: 'Noto Sans JP', sans-serif;
  font-size: 2rem;
  max-width: 95vw; /* 画面幅の95%までに制限 */
  text-align: center;
  word-break: keep-all; /* 単語途中で改行しない */
  color: #fff;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
  animation: pulse 2.5s ease-in-out infinite;
  margin-top: 5vh;
  margin-bottom: 5vh;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.07); }
  100% { transform: scale(1); }
}

.emoji-beer {
  display: inline-block;
  font-size: 2.3rem;
  text-align: center;
}

.emoji-dice {
  display: inline-block;
  font-size: 1.8rem;
  text-align: center;
}

/*ゲーム開始ボタン*/
#startGame {
  display: none;
  margin: 5vh auto; /* 上下に余白＋中央寄せ */
  text-align: center;
}

/* 設定ボタン */
.settings-button {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  top: 10px;
  right: 10px;
  font-size: 20px;
  width: 35px;
  height: 35px;
  padding: 0;
  background-color: #9b0e39;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  z-index: 100;
}

#settingsPanel {
  position: absolute;
  top: 10px;
  right: 10px;
  background: #fff;
  border: 1px solid #ccc;
  padding: 5px 10px;
  padding-top: 25px;
  z-index: 100;
}

.panel-close {
  position: absolute;
  top: 0px;
  right: 0px;
  width: 30px;                /* 親指タップでも十分 */
  height: 30px;
  border: none;
  background: transparent;
  color: rgb(189, 0, 0);
  font-weight: bold;
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
}

#addPlayerBtn, #removePlayerBtn {
  margin-top: 5px;
  margin-bottom: 5px;
}

.addPlayerBtn, .removePlayerBtn {
  border: 1px solid #333;
  padding: 5px 10px;
  cursor: pointer;
}

.removePlayerPopup {
  background: white;
  border: 2px solid #333;
  padding: 10px 30px;
  z-index: 1000;
  position: relative;
}

.removePlayerHeader {
  font-size: 16px;
  font-weight: bold;
  margin-top: 5px;
  margin-bottom: 10px;
  text-align: center;
  white-space: pre-line;
}

.removePlayerClose {
  position: absolute;
  top: 3px;
  right: 3px;
  background: transparent;
  border: none;
  font-size: 20px;
  color: rgb(189, 0, 0);
  font-weight: bold;
  cursor: pointer;
}

.removePlayerRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 10px auto;
  width: 200px;
}

.removePlayerName {
  font-size: 18px;
}

.modal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.5); /* 半透明の背景 */
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999; /* 他要素の上に */
}

.modal.hidden {
  display: none;
}

.modal-content {
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  min-width: 300px;
}




/* お椀エリア（サイコロを振る場所） */
#bowlArea {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 9999;

  width: 100%;
  max-width: 800px;
  height: auto;
  background-color: #eee;
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(0,0,0,0.3);

  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
#bowlArea.show{
  display: flex; /* 表示時に flex にする*/
}

#threeCanvas {
  width: 100%;
  aspect-ratio: 1 / 1; /* 幅と高さを同じにする */
  background-color: #ccc; /* 一時的に背景色を付けて確認しやすく */
  touch-action: none;
  display: block;
}

/* イベントカード */
#eventCard {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 60vw;
  height: 90vw;
  perspective: 1000px;
  z-index: 2000;
}

.card-inner {
  width: 100%;
  height: 100%;
  transition: transform 1s;
  transform-style: preserve-3d;
}

.card-inner.flipped {
  transform: rotateY(180deg);
}

.card-front, .card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  font-weight: bold;
}

.card-front {
  background-image: url('./images/card.webp'); /* 共通セル画像 */
  background-size: cover;
  background-position: center;
  border-radius: 9% / 6%;
}


.card-back {
  background: #fff;
  transform: rotateY(180deg);
  white-space: pre-line;
}

/* 出目の表示 */
#dice-result {
  font-size: 24px;
  font-weight: bold;
  margin: 0;
  text-align: center;
}

/* ゲーム画面 */
#gameScreen {
  position: relative;
  height: 100%;
  width: 100%;
  flex-direction: column;
  align-items: center;
  box-sizing: border-box; /* paddingを含めて100vhに収める */
}

#gameScreen.show {
  display: flex;
}

h2 {
  margin: 0;
  padding-top: 15px;
  padding-bottom: 15px;
}

/* 盤面（マス） */
#board {
  position: relative;
  width: 100%;
  flex: 1;
  box-sizing: border-box; /* paddingを含めて100vhに収める */
  overflow-y: scroll;
}
svg {
  position: absolute;
  top: 0;
  left: 0;
}

/* スタートマス */
.cell.start {
  background-color: #e0e0e0;
  font-size: 1.2em;
  color: #333;
  display: flex;
  align-items: center;
  justify-content: center;
  background-image: none;
  border-radius: 0%;
  border: 3px solid #000000; /* 好きな色で縁取り */
}

.cell.start .cellText{
  font-weight: bold;
}

.cell {
  position: absolute;
  width: clamp(50px, 10vw, 120px);
  aspect-ratio: 2 / 3;
  background-image: url('./images/card.webp');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  border-radius: 9% / 6%;
  font-size: clamp(12px, 3vw, 18px);
  color: #333;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ゴールマス */
.cell.goal {
  background: radial-gradient(circle at center,
    #f4c542 0%,   /* 中心は金色 */
    #ff6f61 90%,  /* 中間は朱赤 */
    #c00 100%     /* 外側は濃い赤 */
  );
  clip-path: polygon(
    50% 1%, 58% 20%, 72% 8%, 75% 30%,
    100% 35%, 80% 50%, 98% 68%, 75% 70%,
    75% 90%, 58% 80%, 50% 99%, 42% 80%,
    30% 90%, 25% 70%, 0% 65%, 20% 50%,
    3% 30%, 26% 30%, 25% 5%, 42% 20%
  );
  border: 3px solid gold;
  animation: flash 1.8s infinite;
  color: white;
  font-weight: bold;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
}

@keyframes flash {
  0% {
    background: radial-gradient(circle at center,
      rgba(255, 135, 0, 1) 0%,   /* 再び強い光 */
      rgba(255, 145, 0, 1) 50%,  
      rgba(255, 180, 0, 1) 100%
    );
  }
  33% {
    background: radial-gradient(circle at center,
      rgba(255, 180, 0, 1) 0%,   /* 中心が消える */
      rgba(255, 215, 0, 1) 40%,  /* 中間も弱くなる */
      rgba(255, 215, 0, 1) 70%      /* 外側は透明 */
    );
  }
  66% {
    background: radial-gradient(circle at center,
      rgba(255, 145, 0, 1) 0%,   /* 再び強い光 */
      rgba(255, 180, 0, 1) 40%,  
      rgba(255, 215, 0, 1) 70%
    );
  }
  100% {
    background: radial-gradient(circle at center,
      rgba(255, 135, 0, 1) 0%,   /* 再び強い光 */
      rgba(255, 145, 0, 1) 50%,  
      rgba(255, 180, 0, 1) 100%
    );
  }
}

.cell.goal .cellText{
  font-weight: bold;
}

/* セル同士をつなぐ道 */
#pathLayer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;

  pointer-events: none;
  z-index: 0;
}

/* 複数プレイヤーのコマ（共通スタイル） */
.playerPiece {
  position: absolute;
  z-index: 10;
  font-size: 12px;
  text-align: center;
  line-height: 20px;
  transition: transform 0.6s ease-out, opacity 0.6s ease-out;
}

.playerPiece.disappear {
  transform: translateY(-50%);
  opacity: 0;
}

.playerPiece.drop {
  transform: translateY(0);
  opacity: 1;
}

.pieceImage {
  width: 100%;
  height: 100%;
  object-fit: contain; /* はみ出し防止 */
}

/* プレイヤー名の入力欄 */
.playerInputRow {
  display: flex;
  justify-content: center; /* 横方向中央揃え */
  align-items: center;         /* 縦方向中央揃え */
  gap: 2rem;                 /* 列間の余白を少しだけ */
  margin-top: 20px;
  margin-bottom: 20px;
  font-weight: bold;
}

.headerRow {
  margin-top: 40px;
}

.playerInputRow input[type="text"],
.headerCellPlayername {
  width: 12rem;       /* プレイヤー名列の幅を統一 */
  text-align: center;
}

.headerCellPlayername {
  padding: 0 4px; /* 上下0px、左右8px */
}

.pieceSelect,
.headerCellPiece {
  width: 64px;        /* コマ列の幅を統一 */
  text-align: center;
}

.pieceSelect {
  width: 64px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.piecePreview {
  width: 64px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  background-color: rgb(185, 174, 181);
  border-radius: 8px;
}

.piecePreview img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.piecePopup {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  background: rgb(185, 174, 181);
  border: 1px solid rgb(158, 92, 134);
  padding: 10px;
  display: grid;
  grid-template-columns: repeat(5, 64px);
  gap: 8px;
  z-index: 1000;
}

.pieceOption {
  width: 64px;
  height: 64px;
  cursor: pointer;
}

/* プレイヤー交代ボタン */
#nextPlayerButton {
  padding: 10px 20px;
  font-size: 16px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  margin-top: 5vh;
  margin-bottom: 3vh;
  visibility: hidden; /* 非表示だがスペースは保持 */
}
#nextPlayerButton.show {
  visibility: visible;
}

#turnInfo {
  margin: 2vh auto;
}

#backToHomeButton {
  padding: 10px 20px;
  font-size: 16px;
  background-color: #2196F3;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  margin-top: 20px;
}

.hidden {
  display: none;
}

/* お椀エリアを中央に表示するスタイル */
.popup-center {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 100;
  width: 300px;
  height: 300px;
  background-color: #eee;
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(0,0,0,0.3);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 幕での画面遷移 */
.curtain {
  position: fixed;
  top: -120%;
  left: -3%;
  width: 106%;
  height: 103%;
  background: url("./images/curtain.png") center no-repeat;
  background-size: 100% 100%;
  z-index: 999;
}

@keyframes dropCurtain {
  0% { top: -120%; }
  100% { top: 0; }
}

@keyframes swingCurtain {
  0%   { transform: rotateZ(0deg) translateX(0); }
  20%  { transform: rotateZ(1.5deg) translateX(2%); }
  40%  { transform: rotateZ(-1.5deg) translateX(-2%); }
  60%  { transform: rotateZ(1deg) translateX(1%); }
  80%  { transform: rotateZ(-1deg) translateX(-1%); }
  100% { transform: rotateZ(0deg) translateX(0);}
}

@keyframes curtainLift {
  0% { top: 0%; }
  100% { top: -120%; }
}
.curtain.drop {
  animation: dropCurtain 0.8s ease-out forwards;
}

.curtain.swing {
  top: 0%;
  animation: swingCurtain 1.2s ease-in-out 2;
}

.curtain.lift {
  animation: curtainLift 2s linear forwards;
}

/* コマにプレイヤー名を表示 */
.nameBubble {
  position: absolute;
  bottom: 100%;        /* コマのすぐ上に配置 */
  left: 50%;
  transform: translateX(-50%);
  background: #fff;
  color: #333;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 14px;
  white-space: nowrap;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

/* 吹き出しの三角形 */
.nameBubble::after {
  content: "";
  position: absolute;
  top: 100%; /* 吹き出しの下端に配置 */
  left: 50%;
  transform: translateX(-50%);
  border-width: 6px;
  border-style: solid;
  border-color: #fff transparent transparent transparent;
}

/* プレイヤー順 */
#playerOrderDisplay {
  position: fixed;          /* 画面に固定 */
  top: 15%;                 /* 画面の縦中央 */
  left: 50%;                /* 画面の横中央 */
  transform: translate(-50%, 0%); /* 中央に揃える */
  text-align: center;
}

.orderLabel {
  font-weight: bold;       /* 太字 */
  font-size: 1.2em;        /* 少し大きく */
  margin-bottom: 1em;    /* ラベルと次の行の間に余白 */
}
